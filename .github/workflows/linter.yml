name: 'Code checks'

on: [push]

env:
  cmssw_ver: CMSSW_10_2_10

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    - name: Pull the Docker Image
      run: docker pull clelange/cc7-cmssw-cvmfs:latest
    - name: Run Docker Image
      run: |
          docker run --rm -t -P --cap-add SYS_ADMIN --cap-add=MKNOD \
          --security-opt apparmor=unconfined -e CVMFS_MOUNTS="cms.cern.ch" \
          --device -v /sys/fs/cgroup:/sys/fs/cgroup:ro \
          /dev/fuse clelange/cc7-cmssw-cvmfs:latest /bin/bash

